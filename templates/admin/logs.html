{% extends "admin/base.html" %}

{% block title %}ç™»å½•æ—¥å¿— - {{ config.site_title }}{% endblock %}

{% block admin_content %}
<div class="space-y-6">
    <!-- é¡µé¢æ ‡é¢˜ -->
    <div>
        <h1 class="text-2xl font-bold text-white">ç™»å½•æ—¥å¿—</h1>
        <p class="text-gray-400 mt-1">æŸ¥çœ‹ç®¡ç†åå°ç™»å½•è®°å½•ï¼Œç›‘æ§å¼‚å¸¸ç™»å½•è¡Œä¸º</p>
    </div>
    
    <!-- ç»Ÿè®¡ä¿¡æ¯ -->
    <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
        <div class="glass-card p-4">
            <div class="text-gray-400 text-sm">æ€»ç™»å½•å°è¯•</div>
            <div class="text-2xl font-bold text-white">{{ logs | length }}</div>
        </div>
        <div class="glass-card p-4">
            <div class="text-gray-400 text-sm">æˆåŠŸç™»å½•</div>
            <div class="text-2xl font-bold text-green-400">{{ logs | selectattr('success') | list | length }}</div>
        </div>
        <div class="glass-card p-4">
            <div class="text-gray-400 text-sm">å¤±è´¥å°è¯•</div>
            <div class="text-2xl font-bold text-red-400">{{ logs | rejectattr('success') | list | length }}</div>
        </div>
    </div>
    
    <!-- æ—¥å¿—åˆ—è¡¨ -->
    <div class="glass-card overflow-hidden">
        <div class="overflow-x-auto">
            <table class="glass-table">
                <thead>
                    <tr>
                        <th>æ—¶é—´</th>
                        <th>IP åœ°å€</th>
                        <th>çŠ¶æ€</th>
                        <th>è®¾å¤‡ä¿¡æ¯</th>
                    </tr>
                </thead>
                <tbody>
                    {% if logs %}
                        {% for log in logs %}
                        <tr>
                            <td class="whitespace-nowrap">{{ log.time }}</td>
                            <td>
                                <span class="font-mono">{{ log.ip }}</span>
                            </td>
                            <td>
                                {% if log.success %}
                                <span class="bg-green-500/20 text-green-400 px-2 py-1 rounded text-sm">
                                    âœ… æˆåŠŸ
                                </span>
                                {% else %}
                                <span class="bg-red-500/20 text-red-400 px-2 py-1 rounded text-sm">
                                    âŒ å¤±è´¥
                                </span>
                                {% endif %}
                            </td>
                            <td class="max-w-xs truncate text-sm text-gray-400" title="{{ log.user_agent }}">
                                {{ log.user_agent[:50] }}{% if log.user_agent|length > 50 %}...{% endif %}
                            </td>
                        </tr>
                        {% endfor %}
                    {% else %}
                        <tr>
                            <td colspan="4" class="text-center py-8 text-gray-400">
                                <div class="text-4xl mb-2">ğŸ“­</div>
                                <p>æš‚æ— ç™»å½•è®°å½•</p>
                            </td>
                        </tr>
                    {% endif %}
                </tbody>
            </table>
        </div>
    </div>
    
    <!-- å®‰å…¨æç¤º -->
    <div class="glass-card p-4">
        <h3 class="text-lg font-medium text-white mb-2">ğŸ”’ å®‰å…¨æç¤º</h3>
        <ul class="text-gray-400 text-sm space-y-1">
            <li>â€¢ å¦‚æœå‘ç°é™Œç”Ÿ IP å¤šæ¬¡ç™»å½•å¤±è´¥ï¼Œå¯èƒ½æœ‰äººåœ¨å°è¯•ç ´è§£å¯†ç </li>
            <li>â€¢ å¦‚æœå‘ç°é™Œç”Ÿ IP ç™»å½•æˆåŠŸï¼Œè¯·ç«‹å³ä¿®æ”¹å¯†ç </li>
            <li>â€¢ å»ºè®®ä½¿ç”¨å¤æ‚å¯†ç ï¼Œå®šæœŸæ›´æ¢</li>
            <li>â€¢ æ—¥å¿—æœ€å¤šä¿ç•™ 100 æ¡è®°å½•</li>
        </ul>
    </div>
</div>
{% endblock %}